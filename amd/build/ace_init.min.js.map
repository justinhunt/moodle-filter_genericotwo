{"version":3,"file":"ace_init.min.js","sources":["../src/ace_init.js"],"sourcesContent":["define(['jquery'], function ($) {\n    return {\n        init: function (params) {\n            if (!params.enableace || params.enableace == '0') {\n                return;\n            }\n\n            var cdnUrl = 'https://cdn.jsdelivr.net/npm/ace-builds@1.43.5/src-min-noconflict/';\n            if (params.acecdn) {\n                switch (params.acecdn) {\n                    case 'unpkg':\n                        cdnUrl = 'https://unpkg.com/ace-builds@1.43.5/src-min-noconflict/';\n                        break;\n                    case 'jsdelivr':\n                    default:\n                        cdnUrl = 'https://cdn.jsdelivr.net/npm/ace-builds@1.43.5/src-min-noconflict/';\n                        break;\n                }\n            }\n\n            // Ace checks for 'requirejs' and aborts if found, but doesn't register properly as anonymous module.\n            // We temporarily hide requirejs to force Ace to register globally.\n            var oldRequire = window.require;\n            var oldDefine = window.define;\n            var oldRequirejs = window.requirejs;\n\n            window.require = undefined;\n            window.define = undefined;\n            window.requirejs = undefined;\n\n            $.getScript(cdnUrl + 'ace.js', function () {\n                // Restore RequireJS\n                window.require = oldRequire;\n                window.define = oldDefine;\n                window.requirejs = oldRequirejs;\n\n                var aceEditor = window.ace;\n                if (!aceEditor) {\n                    console.error('GenericoTwo: Ace Editor failed to load (global ace not found).');\n                    return;\n                }\n\n                // Determine modes for each textarea\n                var textareas = [\n                    { id: 'id_content', mode: 'html' },\n                    { id: 'id_templateend', mode: 'html' },\n                    { id: 'id_jscontent', mode: 'javascript' },\n                    { id: 'id_dataset', mode: 'sql' },\n                    { id: 'id_customcss', mode: 'css' }\n                ];\n\n                aceEditor.config.set('basePath', cdnUrl);\n\n\n                textareas.forEach(function (item) {\n                    var textarea = $('#' + item.id);\n                    if (textarea.length) {\n                        // Create container\n                        var editDiv = $('<div>', {\n                            position: 'absolute',\n                            width: '100%',\n                            height: textarea.height(),\n                            'class': textarea.attr('class')\n                        }).insertBefore(textarea);\n\n                        // Style specifically to match bootstrap controls somewhat\n                        editDiv.css({\n                            'min-height': '300px', // Ace needs height\n                            'border': '1px solid #ccc',\n                            'border-radius': '4px'\n                        });\n\n                        textarea.hide();\n\n                        var editor = aceEditor.edit(editDiv[0]);\n                        editor.getSession().setMode('ace/mode/' + item.mode);\n                        editor.setTheme('ace/theme/chrome');\n                        editor.setValue(textarea.val(), 1); // 1 = moves cursor to end\n\n                        // Update textarea on change\n                        editor.getSession().on('change', function () {\n                            textarea.val(editor.getSession().getValue());\n                        });\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","init","params","enableace","cdnUrl","acecdn","oldRequire","window","require","oldDefine","oldRequirejs","requirejs","undefined","getScript","aceEditor","ace","config","set","id","mode","forEach","item","textarea","length","editDiv","position","width","height","attr","insertBefore","css","hide","editor","edit","getSession","setMode","setTheme","setValue","val","on","getValue","console","error"],"mappings":"AAAAA,qCAAO,CAAC,WAAW,SAAUC,SAClB,CACHC,KAAM,SAAUC,WACPA,OAAOC,WAAiC,KAApBD,OAAOC,eAI5BC,OAAS,wEACTF,OAAOG,UAEE,UADDH,OAAOG,OAEPD,OAAS,+DAITA,OAAS,yEAOjBE,WAAaC,OAAOC,QACpBC,UAAYF,OAAOR,OACnBW,aAAeH,OAAOI,UAE1BJ,OAAOC,aAAUI,EACjBL,OAAOR,YAASa,EAChBL,OAAOI,eAAYC,EAEnBZ,EAAEa,UAAUT,OAAS,UAAU,WAE3BG,OAAOC,QAAUF,WACjBC,OAAOR,OAASU,UAChBF,OAAOI,UAAYD,iBAEfI,UAAYP,OAAOQ,OAClBD,WAcLA,UAAUE,OAAOC,IAAI,WAAYb,QARjB,CACZ,CAAEc,GAAI,aAAcC,KAAM,QAC1B,CAAED,GAAI,iBAAkBC,KAAM,QAC9B,CAAED,GAAI,eAAgBC,KAAM,cAC5B,CAAED,GAAI,aAAcC,KAAM,OAC1B,CAAED,GAAI,eAAgBC,KAAM,QAMtBC,SAAQ,SAAUC,UACpBC,SAAWtB,EAAE,IAAMqB,KAAKH,OACxBI,SAASC,OAAQ,KAEbC,QAAUxB,EAAE,QAAS,CACrByB,SAAU,WACVC,MAAO,OACPC,OAAQL,SAASK,eACRL,SAASM,KAAK,WACxBC,aAAaP,UAGhBE,QAAQM,IAAI,cACM,eACJ,iCACO,QAGrBR,SAASS,WAELC,OAASlB,UAAUmB,KAAKT,QAAQ,IACpCQ,OAAOE,aAAaC,QAAQ,YAAcd,KAAKF,MAC/Ca,OAAOI,SAAS,oBAChBJ,OAAOK,SAASf,SAASgB,MAAO,GAGhCN,OAAOE,aAAaK,GAAG,UAAU,WAC7BjB,SAASgB,IAAIN,OAAOE,aAAaM,wBA3CzCC,QAAQC,MAAM"}